import{a5 as fe,E as ie,K as k,h as I,a6 as N,a as S,c as J,b as le,G as se,I as te,J as K,M,R,a7 as ue,N as P,O as W,Q as ve,a8 as O,a9 as Z,aa as q,ab as Q,o as de,ac as U,ad as _e,ae as L,af as oe,ag as ce,ah as he,ai as me,aj as x,ak as Ee,al as j,q as pe,am as ee,an as Te,a4 as Ae,ao as Ie,ap as we,aq as be,g as ge,X as Re}from"./cXHjRKmv.js";import{b as z,c as Ce}from"./CMMHqqq5.js";function Me(f,e){return e}function Ne(f,e,a,l){for(var c=[],v=e.length,s=0;s<v;s++)oe(e[s].e,c,!0);var d=v>0&&c.length===0&&a!==null;if(d){var _=a.parentNode;ce(_),_.append(a),l.clear(),g(f,e[0].prev,e[v-1].next)}he(c,()=>{for(var h=0;h<v;h++){var t=e[h];d||(l.delete(t.k),g(f,t.prev,t.next)),me(t.e,!d)}})}function Oe(f,e,a,l,c,v=null){var s=f,d={flags:e,items:new Map,first:null},_=(e&ee)!==0;if(_){var h=f;s=I?k(N(h)):h.appendChild(fe())}I&&S();var t=null,m=!1,i=le(()=>{var o=a();return _e(o)?o:o==null?[]:Z(o)});ie(()=>{var o=J(i),r=o.length;if(m&&r===0)return;m=r===0;let w=!1;if(I){var p=se(s)===te;p!==(r===0)&&(s=K(),k(s),M(!1),w=!0)}if(I){for(var T=null,A,E=0;E<r;E++){if(R.nodeType===8&&R.data===ue){s=R,w=!0,M(!1);break}var n=o[E],u=l(n,E);A=ae(R,d,T,null,n,u,E,c,e,a),d.items.set(u,A),T=A}r>0&&k(K())}I||He(o,d,s,c,e,l,a),v!==null&&(r===0?t?P(t):t=W(()=>v(s)):t!==null&&ve(t,()=>{t=null})),w&&M(!0),J(i)}),I&&(s=R)}function He(f,e,a,l,c,v,s){var V,X,$,B;var d=(c&Te)!==0,_=(c&(x|L))!==0,h=f.length,t=e.items,m=e.first,i=m,o,r=null,w,p=[],T=[],A,E,n,u;if(d)for(u=0;u<h;u+=1)A=f[u],E=v(A,u),n=t.get(E),n!==void 0&&((V=n.a)==null||V.measure(),(w??(w=new Set)).add(n));for(u=0;u<h;u+=1){if(A=f[u],E=v(A,u),n=t.get(E),n===void 0){var re=i?i.e.nodes_start:a;r=ae(re,e,r,r===null?e.first:r.next,A,E,u,l,c,s),t.set(E,r),p=[],T=[],i=r.next;continue}if(_&&ke(n,A,u,c),n.e.f&O&&(P(n.e),d&&((X=n.a)==null||X.unfix(),(w??(w=new Set)).delete(n))),n!==i){if(o!==void 0&&o.has(n)){if(p.length<T.length){var H=T[0],b;r=H.prev;var Y=p[0],y=p[p.length-1];for(b=0;b<p.length;b+=1)F(p[b],H,a);for(b=0;b<T.length;b+=1)o.delete(T[b]);g(e,Y.prev,y.next),g(e,r,Y),g(e,y,H),i=H,r=y,u-=1,p=[],T=[]}else o.delete(n),F(n,i,a),g(e,n.prev,n.next),g(e,n,r===null?e.first:r.next),g(e,r,n),r=n;continue}for(p=[],T=[];i!==null&&i.k!==E;)i.e.f&O||(o??(o=new Set)).add(i),T.push(i),i=i.next;if(i===null)continue;n=i}p.push(n),r=n,i=n.next}if(i!==null||o!==void 0){for(var C=o===void 0?[]:Z(o);i!==null;)i.e.f&O||C.push(i),i=i.next;var D=C.length;if(D>0){var ne=c&ee&&h===0?a:null;if(d){for(u=0;u<D;u+=1)($=C[u].a)==null||$.measure();for(u=0;u<D;u+=1)(B=C[u].a)==null||B.fix()}Ne(e,C,ne,t)}}d&&pe(()=>{var G;if(w!==void 0)for(n of w)(G=n.a)==null||G.apply()}),q.first=e.first&&e.first.e,q.last=r&&r.e}function ke(f,e,a,l){l&x&&Q(f.v,e),l&L?Q(f.i,a):f.i=a}function ae(f,e,a,l,c,v,s,d,_,h){var t=(_&x)!==0,m=(_&Ee)===0,i=t?m?de(c):U(c):c,o=_&L?U(s):s,r={i:o,v:i,k:v,a:null,e:null,prev:a,next:l};try{return r.e=W(()=>d(f,i,o,h),I),r.e.prev=a&&a.e,r.e.next=l&&l.e,a===null?e.first=r:(a.next=r,a.e.next=r.e),l!==null&&(l.prev=r,l.e.prev=r.e),r}finally{}}function F(f,e,a){for(var l=f.next?f.next.e.nodes_start:a,c=e?e.e.nodes_start:a,v=f.e.nodes_start;v!==l;){var s=j(v);c.before(v),v=s}}function g(f,e,a){e===null?f.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Se(f,e,a=!1,l=!1,c=!1){var v=f,s="";Ae(()=>{var d=q;if(s===(s=e()??"")){I&&S();return}if(d.nodes_start!==null&&(Ie(d.nodes_start,d.nodes_end),d.nodes_start=d.nodes_end=null),s!==""){if(I){R.data;for(var _=S(),h=_;_!==null&&(_.nodeType!==8||_.data!=="");)h=_,_=j(_);if(_===null)throw we(),be;z(R,h),v=k(_);return}var t=s+"";a?t=`<svg>${t}</svg>`:l&&(t=`<math>${t}</math>`);var m=Ce(t);if((a||l)&&(m=N(m)),z(N(m),m.lastChild),a||l)for(;N(m);)v.before(N(m));else v.before(m)}})}function qe(f,e,a){var l=ge(f,e);l&&l.set&&(f[e]=a,Re(()=>{f[e]=null}))}export{qe as b,Oe as e,Se as h,Me as i};
